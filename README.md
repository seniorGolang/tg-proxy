# tg-proxy

Прокси для пакетов из разных источников (GitLab, GitHub и других): даёт доступ к репозиториям через короткие алиасы, подменяет URL в манифестах и отдаёт файлы через единую точку входа. Разработан для работы с [tg](https://github.com/seniorGolang/tg), может использоваться как отдельный компонент.

## Возможности

- **Единый доступ к пакетам** — несколько источников (GitLab, GitHub и др.) через один прокси и короткие алиасы проектов.
- **Безопасное хранение** — токены доступа к репозиториям хранятся в зашифрованном виде.
- **Производительность** — потоковая выдача файлов и кеширование данных для быстрых ответов.
- **Гибкое хранилище** — проекты и метаданные можно хранить в MongoDB или в SQL-базах (PostgreSQL, SQLite, MySQL, SQL Server).
- **Раздельный доступ** — отдельная авторизация для публичного доступа к пакетам и для админских операций (управление проектами).
- **Веб-интерфейс (Web UI)** — просмотр каталога в браузере:
  - дерево проектов и версий;
  - список пакетов по выбранной версии с командами установки;
  - копирование команд установки манифеста и отдельных пакетов;
  - карточка пакета: описание, загрузки, файлы, скрипты, зависимости;
  - переключение светлой и тёмной темы;
  - адрес страницы отражает выбранный проект, версию и пакет — ссылкой можно поделиться.

## Концепции

- **Проксирование по алиасу** — клиент обращается к прокси по алиасу проекта и версии; прокси определяет источник, при необходимости расшифровывает токен и запрашивает манифест или файл у GitLab/GitHub и т.п.
- **Трансформация манифестов** — при отдаче манифеста все URL файлов, манифестов и скриптов заменяются на проксированные, чтобы клиент качал всё через прокси. Зависимости между зарегистрированными проектами тоже подменяются на проксированные URL.
- **Зависимости** — поддерживаются форматы вида `package`, `package@version`, `источник:package`, `источник:package@version` и зависимость по полному URL репозитория; для известных проектов подставляется проксированный источник.
- **Публичный и админский API** — публичные маршруты отдают манифесты, списки версий и файлы; админские — создание, изменение и удаление проектов в каталоге.
- **Web UI** — читаемый каталог поверх того же API: проекты → версии → пакеты, команды установки и детали пакетов без вызова API вручную.

## Лицензия

См. файл [LICENSE](LICENSE).

## Документация

Подробная техническая документация и описание API — в репозитории и в `api/swagger.json` (OpenAPI 3.0).
